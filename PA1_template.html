<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="TSA" />


<title>Peer-graded Assignment: Reproducible Research Project 1</title>

<script src="PA1_template_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="PA1_template_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="PA1_template_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="PA1_template_files/navigation-1.1/tabsets.js"></script>
<link href="PA1_template_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="PA1_template_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Peer-graded Assignment: Reproducible Research Project 1</h1>
<h4 class="author">TSA</h4>
<h4 class="date">4/19/2019</h4>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This assignment makes use of data from a personal activity monitoring device. This device collects data at 5 minute intervals through out the day. The data consists of two months of data from an anonymous individual collected during the months of October and November, 2012 and include the number of steps taken in 5 minute intervals each day.</p>
<p>The data for this assignment can be downloaded from the course web site:</p>
<p><strong>Dataset</strong>: Activity monitoring data [52K] The variables included in this dataset are:</p>
<p>-<strong>steps</strong>: Number of steps taking in a 5-minute interval (missing values are coded as <strong>NA</strong>)<br />
-<strong>date</strong>: The date on which the measurement was taken in YYYY-MM-DD format.<br />
-<strong>interval</strong>: Identifier for the 5-minute interval in which measurement was taken.<br />
The <a href="https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2Factivity.zip">dataset</a> is stored in ‘activity.csv’, a comma-separated-value (CSV) file and there are a total of 17,568 observations in this dataset.</p>
</div>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>The components of this project are:<br />
1. Loading and preprocessing the data<br />
2. What is mean total number of steps taken per day?<br />
3. What is the average daily activity pattern?<br />
4. Imputing missing values<br />
5. Are there differences in activity patterns between weekdays and weekends?</p>
<p>Results 1.Code for reading in the dataset and/or processing the data<br />
2.Histogram of the total number of steps taken each day<br />
3.Mean and median number of steps taken each day<br />
4.Time series plot of the average number of steps taken<br />
5.The 5-minute interval that, on average, contains the maximum number of steps<br />
6.Code to describe and show a strategy for imputing missing data<br />
7.Histogram of the total number of steps taken each day after missing values are imputed<br />
8.Panel plot comparing the average number of steps taken per 5-minute interval across weekdays and weekends</p>
</div>
<div id="loading-and-preprocessing-the-data" class="section level2">
<h2>1. Loading and preprocessing the data</h2>
<ol style="list-style-type: decimal">
<li>Code for reading in the dataset and/or processing the data</li>
</ol>
<pre class="r"><code># Create data directory if it does not exists
#
       if(!file.exists(&#39;./data&#39;)) dir.create(&#39;./data&#39;)
#</code></pre>
<p>Get data if needed.</p>
<pre class="r"><code>#
       if(!file.exists(&#39;./data/activity_data.zip&#39;)) {
          fileURL &lt;- &#39;https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2Factivity.zip&#39;
          download.file(fileURL, destfile = &#39;./data/activity_data.zip&#39;)
       }
# Unzip data if needed
#
       if(!file.exists(&#39;./data/activity.csv&#39;)) {
          unzip(&#39;./data/activity_data.zip&#39;, exdir = &#39;./data&#39;)
        }
# 
# 
        fileName = &quot;./data/activity.csv&quot;
# Read data
        data &lt;- read.csv(fileName,sep=&quot;,&quot;, header = TRUE, 
                         colClasses = c(&quot;numeric&quot;,&quot;Date&quot;,&quot;numeric&quot;), na.strings =&quot;NA&quot;)
       
        summary (data)</code></pre>
<pre><code>##      steps             date               interval     
##  Min.   :  0.00   Min.   :2012-10-01   Min.   :   0.0  
##  1st Qu.:  0.00   1st Qu.:2012-10-16   1st Qu.: 588.8  
##  Median :  0.00   Median :2012-10-31   Median :1177.5  
##  Mean   : 37.38   Mean   :2012-10-31   Mean   :1177.5  
##  3rd Qu.: 12.00   3rd Qu.:2012-11-15   3rd Qu.:1766.2  
##  Max.   :806.00   Max.   :2012-11-30   Max.   :2355.0  
##  NA&#39;s   :2304</code></pre>
</div>
<div id="what-is-mean-total-number-of-steps-taken-per-day" class="section level2">
<h2>2. What is mean total number of steps taken per day?</h2>
<p>Plot histogram of the total number of steps taken each day and include <em>mean</em> and <em>median</em> calculation in the plot.</p>
<pre class="r"><code>       library(ggplot2)

# First sum according to date
       ans&lt;-data %&gt;% 
              group_by(date) %&gt;% 
              summarise(steps = sum(steps))
       names(data)</code></pre>
<p>[1] “steps” “date” “interval”</p>
<pre class="r"><code>       dim(data)</code></pre>
<p>[1] 17568 3</p>
<pre class="r"><code>       summary(ans)</code></pre>
<pre><code>  date                steps      </code></pre>
<p>Min. :2012-10-01 Min. : 41<br />
1st Qu.:2012-10-16 1st Qu.: 8841<br />
Median :2012-10-31 Median :10765<br />
Mean :2012-10-31 Mean :10766<br />
3rd Qu.:2012-11-15 3rd Qu.:13294<br />
Max. :2012-11-30 Max. :21194<br />
NA’s :8</p>
<p>While the mean and median are in the summary above, they are also calculated separately to include in the histogram plot.</p>
<pre class="r"><code># Imputation of the data when calculating the mean and median
       mean.result1 &lt;- median(ans$steps,na.rm = TRUE)
       mean.result1</code></pre>
<pre><code>## [1] 10765</code></pre>
<pre class="r"><code>       median.result1 &lt;- median(ans$steps,na.rm = TRUE)
       median.result1</code></pre>
<pre><code>## [1] 10765</code></pre>
<pre class="r"><code>       hist(ans$steps,col=&quot;red&quot;, xlab=&quot;Number of Steps per Day&quot;, breaks=10, 
            main = &quot;Total Number of Steps Each Day&quot;)
       abline(v = c(mean.result1,median.result1), col = c(&quot;blue&quot;,&quot;green&quot;), lwd = c(6,2))</code></pre>
<p><img src="PA1_template_files/figure-html/Mean%20and%20Median-1.png" width="672" /></p>
</div>
<div id="what-is-the-average-daily-activity-pattern" class="section level2">
<h2>3. What is the average daily activity pattern?</h2>
<p>The time series plot of the average number of steps taken is executed with the <em>plot</em> function.</p>
<pre class="r"><code># Imputation of the data when calculating mean per interval
       ans2&lt;-aggregate(x=data$steps, by=list(interval=data$interval), 
                       FUN=mean,na.rm = TRUE)
       dim(ans2)</code></pre>
<pre><code>## [1] 288   2</code></pre>
<pre class="r"><code>       plot(ans2$interval,ans2$x,type=&quot;l&quot;, xlab=&quot;5 Minute Interval (Min)&quot;, ylab=&quot;Mean Steps&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/Time%20Series-1.png" width="672" /></p>
<pre class="r"><code>       summary(ans2)</code></pre>
<pre><code>##     interval            x          
##  Min.   :   0.0   Min.   :  0.000  
##  1st Qu.: 588.8   1st Qu.:  2.486  
##  Median :1177.5   Median : 34.113  
##  Mean   :1177.5   Mean   : 37.383  
##  3rd Qu.:1766.2   3rd Qu.: 52.835  
##  Max.   :2355.0   Max.   :206.170</code></pre>
<p>The 5-minute interval that, on average, contains the maximum number of steps is calculated below.<br />
The <em>max</em> function is used to determine the max of the average step, then the <em>which.max</em> function is used to find the position. The position is validated, and then used to find the 5-min interval from the data that was aggregated in part 4.</p>
<pre class="r"><code># The maximum average number of steps per interval
       max(ans2$x)</code></pre>
<pre><code>## [1] 206.1698</code></pre>
<pre class="r"><code># The position of the maximum number of steps
       maxPos &lt;- which.max(ans2$x)
# Corresponding 5 minute interval for max steps occurs at maxPos        
       ans2$interval[maxPos]</code></pre>
<pre><code>## [1] 835</code></pre>
</div>
<div id="code-to-describe-and-show-a-strategy-for-imputing-missing-data" class="section level2">
<h2>4. Code to describe and show a strategy for imputing missing data</h2>
<ol style="list-style-type: decimal">
<li>The total number of missing values in the dataset (i.e. the total number of rows with NAs) is calculated below. The answer for the entire table is compared against the steps column to verify that all missing data are accounted for in the steps column alone.</li>
</ol>
<pre class="r"><code>       sum(is.na(data))</code></pre>
<pre><code>## [1] 2304</code></pre>
<pre class="r"><code># See that all missing data are attributed to STEPS
       sum(is.na(data$steps))</code></pre>
<pre><code>## [1] 2304</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>The strategy for filling in all of the missing values in the dataset is to use mean 5-minute interval for the NAs.</p></li>
<li><p>A new dataset (data2) is created below that is equal to the original dataset but with the missing data filled in.</p></li>
</ol>
<pre class="r"><code>       data2&lt;-data
       
# From inspection of data, a day has 288 intervals (nrows of ans2)
# Loop on days to assign 5-min interval mean to 5-min interval NA.
       jlim &lt;- nrow(data2)/nrow(ans2)
       for (j in 1:jlim){
              for(i in 1:nrow(ans2)) {
                     k&lt;-(j-1)*nrow(ans2)+i
                     data2$steps[k][is.na(data2$steps[k])] &lt;-ans2$x[i]
              }
       }</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>A histogram of the total number of steps taken each day is plotted here. The mean and median total number of steps taken per day are calculated and shown. These values do not differ much from the estimates from the first part of the assignment. The impact of imputing missing data with the means has very little impact on the estimates of the total daily number of steps.</li>
</ol>
<pre class="r"><code># First sum according to date
       newAns&lt;-data2 %&gt;% 
              group_by(date) %&gt;% 
              summarise(steps = sum(steps))
# Summary function displays the mean and median...       
       summary(newAns)</code></pre>
<pre><code>  date                steps      </code></pre>
<p>Min. :2012-10-01 Min. : 41<br />
1st Qu.:2012-10-16 1st Qu.: 9819<br />
Median :2012-10-31 Median :10766<br />
Mean :2012-10-31 Mean :10766<br />
3rd Qu.:2012-11-15 3rd Qu.:12811<br />
Max. :2012-11-30 Max. :21194</p>
<pre class="r"><code># Calculate the mean and median of new mean of newAns
       mean.result2 &lt;- median(newAns$steps,na.rm = FALSE)
       mean.result2</code></pre>
<p>[1] 10766.19</p>
<pre class="r"><code>       median.result2 &lt;- median(newAns$steps,na.rm = FALSE)
       median.result2</code></pre>
<p>[1] 10766.19</p>
<pre class="r"><code>       hist(newAns$steps,col=&quot;green&quot;, xlab=&quot;Number of Steps per Day&quot;, breaks=10, 
            main = &quot;Total Number of Steps Each Day&quot;)
       abline(v = c(mean.result2,median.result2), col = c(&quot;blue&quot;,&quot;green&quot;), lwd = c(6,2))</code></pre>
<p><img src="PA1_template_files/figure-html/Histogram%20of%20Step%20per%20Day-1.png" width="672" /></p>
<p>It is not surprising that imputing the data with the mean does not change the mean or median, as seen above. Imputing the data does make the histogram have greater max and steepens the shape of the envelope.</p>
</div>
<div id="are-there-differences-in-activity-patterns-between-weekdays-and-weekends" class="section level2">
<h2>5. Are there differences in activity patterns between weekdays and weekends?</h2>
<p>A new factor variable “day” is created in the dataset with two levels – “weekday” and “weekend” indicating whether a given date is a weekday or weekend day. First all days are assigned value “weekday”. Then the <em>weekdays</em> function is used to check for Sundays and Saturdays and assign those days as “weekends”.</p>
<pre class="r"><code># First add day to data2 and assign all day to weekdays
       data2$day&lt;-&quot;weekday&quot;
#        
       for (i in 1: nrow(data2)){
              if(weekdays(data2$date[i], abbreviate = FALSE) == &quot;Sunday&quot;|
                 weekdays(data2$date[i], abbreviate = FALSE) == &quot;Saturday&quot;){
                      data2$day[i]&lt;- &quot;weekend&quot;
              }
       }</code></pre>
<p>-Make a panel plot containing a time series plot (i.e.type=“l”) of the 5-minute interval (x-axis) and the average number of steps taken, averaged across all weekday days or weekend days (y-axis). See the README file in the GitHub repository to see an example of what this plot should look like using simulated data.</p>
<pre class="r"><code># First sum according to date
    
       WkDays&lt;-data2 %&gt;% 
               filter(day == &quot;weekday&quot;)%&gt;% 
               group_by(interval) %&gt;% 
               summarise(steps = mean(steps))
       WkDays$day&lt;-&quot;weekday&quot;
       EndDays&lt;-data2 %&gt;% 
               filter(day == &quot;weekend&quot;)%&gt;% 
               group_by(interval) %&gt;% 
               summarise(steps = mean(steps))
       EndDays$day&lt;-&quot;weekend&quot;
# Row bind the answers into one table for use with lattice plotting.       
       xx&lt;-rbind(WkDays,EndDays)

         xyplot(steps ~ interval | day, 
              group = day, data = xx,
              type = c(&quot;l&quot;),
              scales = &quot;free&quot;, layout=c(1,2) )</code></pre>
<p><img src="PA1_template_files/figure-html/Data%20Weekday%20Plot-1.png" width="672" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
